# Key differences between the VPC attributes `enableDnsSupport` and `enableDnsHostnames`:

| Feature                             | `enableDnsSupport`                                                                                                                                                                     | `enableDnsHostnames`                                                                                                                                                                                |
| :---------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Primary Function**                | Enables DNS resolution _within_ the VPC using the Amazon Route 53 Resolver (formerly AmazonProvidedDNS at the `.2` address).                                                           | Determines if instances launched into the VPC get _public_ DNS hostnames assigned if they have a public IP address.                                                                                 |
| **What it Enables**                 | Allows instances in the VPC to query the Route 53 Resolver to resolve public domain names (e.g., `google.com`) and private DNS names (if configured, including AWS private hostnames). | Causes AWS to automatically assign a public DNS hostname (e.g., `ec2-xx-xx-xx-xx.compute-1.amazonaws.com`) to an instance _if_ it has a public IP address.                                          |
| **Effect on Hostname Assignment**   | Does **not** directly assign hostnames to instances.                                                                                                                                   | **Assigns** public DNS hostnames to instances with public IPs. Does **not** affect private hostname assignment (`ip-xxx-xxx-xxx-xxx...`).                                                           |
| **Effect on DNS Resolution**        | **Required** for any DNS resolution using the Route 53 Resolver within the VPC. If `false`, the resolver is effectively disabled for the VPC.                                          | **Required** (along with `enableDnsSupport=true`) for the Route 53 Resolver to resolve the **AWS-provided private DNS hostnames** (e.g., `ip-10-0-1-23.us-east-1.compute.internal`) to private IPs. |
| **Dependency**                      | Is a **prerequisite** for `enableDnsHostnames`.                                                                                                                                        | **Requires** `enableDnsSupport` to be `true` to have any meaningful effect (assigned hostnames wouldn't be resolvable within the VPC otherwise).                                                    |
| **Scope**                           | Affects **DNS query capability** for resources _within_ the VPC.                                                                                                                       | Affects **hostname assignment** for instances with public IPs and **private hostname resolution** _by the Route 53 Resolver_.                                                                       |
| **Default Value (Default VPC)**     | `true`                                                                                                                                                                                 | `true`                                                                                                                                                                                              |
| **Default Value (Non-Default VPC)** | `true`                                                                                                                                                                                 | `false`                                                                                                                                                                                             |
| **Use Case Example**                | Needed for basic internet access via domain name from within the VPC, or resolving internal resources by name.                                                                         | Needed if you want to connect to your EC2 instances using the AWS-generated public DNS name instead of just the public IP address.                                                                  |

**In simple terms:**

- `enableDnsSupport`: **Can instances _use_ DNS inside the VPC?** (Yes/No)
- `enableDnsHostnames`: **Do instances with public IPs _get_ a public DNS name?** (Yes/No) + **Can the VPC's DNS resolver resolve private hostnames?** (Yes/No - requires both to be true)

You generally need `enableDnsSupport` set to `true` for almost any standard VPC operation involving domain names. You only specifically need `enableDnsHostnames` set to `true` if you require AWS to automatically assign public DNS hostnames to your instances that have public IP addresses, or if you need to resolve the internal `ip-...` hostnames using the Route 53 Resolver.
